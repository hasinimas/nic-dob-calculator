{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HASINI\\\\Desktop\\\\HTML\\\\MY PROJ\\\\nic-dob-calculator\\\\src\\\\components\\\\travel\\\\MapExplorer.jsx\",\n  _s = $RefreshSig$();\n// src/components/travel/MapExplorer.jsx\nimport React, { useEffect, useRef } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"./\"; // styles shared by result view\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MapExplorer({\n  center = [6.9271, 79.8612],\n  places = []\n}) {\n  _s();\n  const containerRef = useRef(null);\n  const mapRef = useRef(null);\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    // initialize map once\n    if (!mapRef.current) {\n      mapRef.current = L.map(containerRef.current, {\n        center,\n        zoom: 11,\n        preferCanvas: true\n      });\n      L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n        attribution: '&copy; OpenStreetMap contributors'\n      }).addTo(mapRef.current);\n    }\n  }, []); // only once\n\n  useEffect(() => {\n    if (!mapRef.current) return;\n    if (center && center.length === 2) {\n      mapRef.current.setView(center, 12);\n    }\n\n    // remove previous places layer if any\n    if (mapRef.current._placesLayer) {\n      mapRef.current.removeLayer(mapRef.current._placesLayer);\n      mapRef.current._placesLayer = null;\n    }\n    const layer = L.layerGroup();\n    places.forEach(p => {\n      var _ref, _ref2, _p$lat, _p$center, _ref3, _ref4, _p$lon, _p$center2, _p$tags, _p$tags2;\n      // Overpass / Nominatim results: nodes have lat/lon, ways have center\n      const lat = (_ref = (_ref2 = (_p$lat = p.lat) !== null && _p$lat !== void 0 ? _p$lat : (_p$center = p.center) === null || _p$center === void 0 ? void 0 : _p$center.lat) !== null && _ref2 !== void 0 ? _ref2 : p.latitude) !== null && _ref !== void 0 ? _ref : null;\n      const lon = (_ref3 = (_ref4 = (_p$lon = p.lon) !== null && _p$lon !== void 0 ? _p$lon : (_p$center2 = p.center) === null || _p$center2 === void 0 ? void 0 : _p$center2.lon) !== null && _ref4 !== void 0 ? _ref4 : p.longitude) !== null && _ref3 !== void 0 ? _ref3 : null;\n      if (!lat || !lon) return;\n      const name = ((_p$tags = p.tags) === null || _p$tags === void 0 ? void 0 : _p$tags.name) || p.display_name || p.name || \"Place\";\n      const popup = `<strong>${name}</strong><br/>${p.type || ((_p$tags2 = p.tags) === null || _p$tags2 === void 0 ? void 0 : _p$tags2.amenity) || \"\"}<br/>\n        <a href=\"https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lat + \",\" + lon)}\" target=\"_blank\" rel=\"noreferrer\">Open in Google Maps</a>`;\n      const marker = L.marker([lat, lon]).bindPopup(popup);\n      layer.addLayer(marker);\n    });\n    layer.addTo(mapRef.current);\n    mapRef.current._placesLayer = layer;\n  }, [places, center]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      width: \"100%\",\n      height: \"360px\",\n      borderRadius: 10,\n      overflow: \"hidden\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 10\n  }, this);\n}\n_s(MapExplorer, \"Z5ajE9A4iwh6gE6IN9U3eeIw9UE=\");\n_c = MapExplorer;\nvar _c;\n$RefreshReg$(_c, \"MapExplorer\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","MapExplorer","center","places","_s","containerRef","mapRef","current","map","zoom","preferCanvas","tileLayer","attribution","addTo","length","setView","_placesLayer","removeLayer","layer","layerGroup","forEach","p","_ref","_ref2","_p$lat","_p$center","_ref3","_ref4","_p$lon","_p$center2","_p$tags","_p$tags2","lat","latitude","lon","longitude","name","tags","display_name","popup","type","amenity","encodeURIComponent","marker","bindPopup","addLayer","ref","style","width","height","borderRadius","overflow","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HASINI/Desktop/HTML/MY PROJ/nic-dob-calculator/src/components/travel/MapExplorer.jsx"],"sourcesContent":["// src/components/travel/MapExplorer.jsx\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"./\"; // styles shared by result view\r\n\r\nexport default function MapExplorer({ center = [6.9271, 79.8612], places = [] }) {\r\n  const containerRef = useRef(null);\r\n  const mapRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    // initialize map once\r\n    if (!mapRef.current) {\r\n      mapRef.current = L.map(containerRef.current, { center, zoom: 11, preferCanvas: true });\r\n      L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n        attribution: '&copy; OpenStreetMap contributors',\r\n      }).addTo(mapRef.current);\r\n    }\r\n  }, []); // only once\r\n\r\n  useEffect(() => {\r\n    if (!mapRef.current) return;\r\n    if (center && center.length === 2) {\r\n      mapRef.current.setView(center, 12);\r\n    }\r\n\r\n    // remove previous places layer if any\r\n    if (mapRef.current._placesLayer) {\r\n      mapRef.current.removeLayer(mapRef.current._placesLayer);\r\n      mapRef.current._placesLayer = null;\r\n    }\r\n\r\n    const layer = L.layerGroup();\r\n    places.forEach((p) => {\r\n      // Overpass / Nominatim results: nodes have lat/lon, ways have center\r\n      const lat = p.lat ?? p.center?.lat ?? p.latitude ?? null;\r\n      const lon = p.lon ?? p.center?.lon ?? p.longitude ?? null;\r\n      if (!lat || !lon) return;\r\n      const name = p.tags?.name || p.display_name || p.name || \"Place\";\r\n      const popup = `<strong>${name}</strong><br/>${p.type || p.tags?.amenity || \"\"}<br/>\r\n        <a href=\"https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lat + \",\" + lon)}\" target=\"_blank\" rel=\"noreferrer\">Open in Google Maps</a>`;\r\n      const marker = L.marker([lat, lon]).bindPopup(popup);\r\n      layer.addLayer(marker);\r\n    });\r\n    layer.addTo(mapRef.current);\r\n    mapRef.current._placesLayer = layer;\r\n  }, [places, center]);\r\n\r\n  return <div ref={containerRef} style={{ width: \"100%\", height: \"360px\", borderRadius: 10, overflow: \"hidden\" }} />;\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}