{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HASINI\\\\Desktop\\\\HTML\\\\MY PROJ\\\\nic-dob-calculator\\\\src\\\\components\\\\travel\\\\TravelResult.jsx\",\n  _s = $RefreshSig$();\n// src/components/travel/TravelResult.jsx\nimport React, { useEffect, useRef, useState } from \"react\";\nimport personas from \"./personas\";\nimport MapExplorer from \"./MapExplorer\";\nimport * as htmlToImage from \"html-to-image\";\nimport \"../TravelResult.css\"; // styles below\n\n// Build an Overpass tiny query for persona\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction buildOverpassFiltersForPersona(personaKey) {\n  // return array of element filters for Overpass (node/way)\n  switch (personaKey) {\n    case \"🌴 Relaxation\":\n      return ['node[\"natural\"=\"beach\"]', 'way[\"natural\"=\"beach\"]', 'node[\"tourism\"=\"hotel\"]', 'node[\"tourism\"=\"resort\"]'];\n    case \"🗺 Adventure\":\n      return ['node[\"tourism\"=\"attraction\"]', 'node[\"leisure\"=\"trail\"]', 'way[\"highway\"=\"path\"]', 'node[\"tourism\"=\"viewpoint\"]'];\n    case \"🏛 Culture\":\n      return ['node[\"tourism\"=\"museum\"]', 'node[\"historic\"]', 'node[\"amenity\"=\"theatre\"]'];\n    case \"🎉 Party\":\n      return ['node[\"amenity\"=\"nightclub\"]', 'node[\"amenity\"=\"bar\"]', 'node[\"amenity\"=\"restaurant\"]'];\n    case \"🍜 Foodie\":\n      return ['node[\"amenity\"=\"restaurant\"]', 'node[\"amenity\"=\"cafe\"]', 'node[\"amenity\"=\"fast_food\"]'];\n    case \"❄ Arctic\":\n      return ['node[\"natural\"=\"peak\"]', 'node[\"tourism\"=\"information\"]', 'node[\"natural\"=\"glacier\"]'];\n    default:\n      return ['node[\"tourism\"=\"attraction\"]'];\n  }\n}\n\n// fetch Overpass places around lat/lon (radius meters)\nasync function fetchPlacesOverpass(lat, lon, personaKey, radius = 30000, limit = 20) {\n  const filters = buildOverpassFiltersForPersona(personaKey);\n  // Construct Overpass QL\n  const clauses = filters.map(f => `${f}(around:${radius},${lat},${lon});`).join(\"\");\n  const q = `[out:json][timeout:25];(${clauses});out center ${limit};`;\n  const url = \"https://overpass-api.de/api/interpreter?data=\" + encodeURIComponent(q);\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(\"Overpass failed: \" + res.status);\n  const data = await res.json();\n  return data.elements || [];\n}\nexport default function TravelResult({\n  answers = null,\n  nicState = {},\n  onClose = () => {}\n}) {\n  _s();\n  var _answers$style;\n  const [personaKey, setPersonaKey] = useState((_answers$style = answers === null || answers === void 0 ? void 0 : answers.style) !== null && _answers$style !== void 0 ? _answers$style : null);\n  const base = personaKey && personas[personaKey] ? personas[personaKey] : {\n    name: \"Traveler\",\n    animal: \"🌍\",\n    img: \"default.jpg\",\n    sound: null\n  };\n  const [coords, setCoords] = useState(null); // [lat, lon]\n  const [places, setPlaces] = useState([]);\n  const [loadingPlaces, setLoadingPlaces] = useState(false);\n  const [errorPlaces, setErrorPlaces] = useState(null);\n  const [playing, setPlaying] = useState(false);\n  const audioRef = useRef(null);\n  const cardRef = useRef(null);\n  useEffect(() => {\n    var _answers$style2;\n    // personaKey from answers\n    setPersonaKey((_answers$style2 = answers === null || answers === void 0 ? void 0 : answers.style) !== null && _answers$style2 !== void 0 ? _answers$style2 : null);\n  }, [answers]);\n  useEffect(() => {\n    // preload audio if exists\n    if (base.sound) {\n      audioRef.current = new Audio(base.sound);\n      audioRef.current.loop = true;\n    } else {\n      audioRef.current = null;\n    }\n    return () => {\n      if (audioRef.current) {\n        try {\n          audioRef.current.pause();\n        } catch {}\n        audioRef.current = null;\n      }\n    };\n  }, [personaKey]);\n  const toggleSound = async () => {\n    if (!audioRef.current) return;\n    if (playing) {\n      audioRef.current.pause();\n      setPlaying(false);\n    } else {\n      try {\n        await audioRef.current.play();\n        setPlaying(true);\n      } catch (e) {\n        // autoplay may be blocked; user interaction required. handle gracefully.\n        console.error(\"Audio play error\", e);\n        alert(\"Audio playback blocked by browser — click the button again to enable sound.\");\n      }\n    }\n  };\n  const requestGeolocationAndFind = () => {\n    setErrorPlaces(null);\n    setLoadingPlaces(true);\n    if (!navigator.geolocation) {\n      setErrorPlaces(\"Geolocation not supported. Showing fallback suggestions.\");\n      setLoadingPlaces(false);\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(async pos => {\n      const lat = pos.coords.latitude;\n      const lon = pos.coords.longitude;\n      setCoords([lat, lon]);\n      try {\n        const el = await fetchPlacesOverpass(lat, lon, personaKey, 30000, 20);\n        setPlaces(el);\n      } catch (err) {\n        console.error(err);\n        setErrorPlaces(\"Places fetch failed. Try again later.\");\n      } finally {\n        setLoadingPlaces(false);\n      }\n    }, err => {\n      console.warn(\"geolocation denied\", err);\n      setErrorPlaces(\"Geolocation denied. Use fallback suggestions.\");\n      setLoadingPlaces(false);\n    }, {\n      timeout: 15000,\n      maximumAge: 60 * 1000\n    });\n  };\n  const downloadCard = async () => {\n    if (!cardRef.current) return alert(\"Card element missing.\");\n    // append watermark in DOM (visible in exported image)\n    const watermark = document.createElement(\"div\");\n    watermark.style.position = \"absolute\";\n    watermark.style.right = \"10px\";\n    watermark.style.bottom = \"8px\";\n    watermark.style.color = \"rgba(0,0,0,0.6)\";\n    watermark.style.fontSize = \"12px\";\n    watermark.style.fontWeight = \"600\";\n    watermark.innerText = \"© hasini de silva\";\n    cardRef.current.appendChild(watermark);\n    try {\n      const dataUrl = await htmlToImage.toPng(cardRef.current, {\n        cacheBust: true\n      });\n      const a = document.createElement(\"a\");\n      a.href = dataUrl;\n      a.download = `${base.name.replace(/\\s+/g, \"_\")}_travel_card.png`;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    } catch (err) {\n      console.error(\"export fail\", err);\n      alert(\"Export failed in this browser. You can still copy text manually.\");\n    } finally {\n      watermark.remove();\n    }\n  };\n\n  // derive some generated suggestions (frontend-only) — more creative than echoing answers\n  function craftPersonaStory() {\n    var _match;\n    // combine persona, setting and pace into a creative title + short plan\n    const p = base.name;\n    const settingEmoji = ((_match = ((answers === null || answers === void 0 ? void 0 : answers.setting) || \"\").match(/[\\u{1F300}-\\u{1FAFF}]/u)) === null || _match === void 0 ? void 0 : _match[0]) || \"\";\n    const pace = (answers === null || answers === void 0 ? void 0 : answers.pace) || \"\";\n    const palette = [`${p} — ${settingEmoji} ${(answers === null || answers === void 0 ? void 0 : answers.setting) || \"destination\"}`, `Tagline: ${pace.includes(\"Slow\") ? \"Breathe, unwind & soak in quiet moments.\" : pace.includes(\"Fast\") ? \"Fast tracks, big thrills.\" : \"A balanced wander with hidden gems.\"}`];\n    return palette;\n  }\n\n  // fallback curated suggestions if geolocation / Overpass fails\n  const fallbackSuggestions = (() => {\n    switch (personaKey) {\n      case \"🌴 Relaxation\":\n        return [{\n          name: \"Maldives — Atoll beaches\",\n          lat: 3.2028,\n          lon: 73.2207,\n          url: \"https://www.google.com/maps/search/maldives+beach\"\n        }];\n      case \"🗺 Adventure\":\n        return [{\n          name: \"Chiang Mai treks, Thailand\",\n          lat: 18.7883,\n          lon: 98.9853,\n          url: \"https://www.google.com/maps/search/chiang+mai+trekking\"\n        }];\n      case \"🏛 Culture\":\n        return [{\n          name: \"Florence, Italy — art & history\",\n          lat: 43.7696,\n          lon: 11.2558,\n          url: \"https://www.google.com/maps/search/florence+italy+duomo\"\n        }];\n      case \"🎉 Party\":\n        return [{\n          name: \"Ibiza, Spain — nightlife\",\n          lat: 38.9067,\n          lon: 1.4206,\n          url: \"https://www.google.com/maps/search/ibiza+party\"\n        }];\n      case \"🍜 Foodie\":\n        return [{\n          name: \"Bangkok street food, Thailand\",\n          lat: 13.7563,\n          lon: 100.5018,\n          url: \"https://www.google.com/maps/search/bangkok+street+food\"\n        }];\n      case \"❄ Arctic\":\n        return [{\n          name: \"Tromsø, Norway — northern lights\",\n          lat: 69.6492,\n          lon: 18.9553,\n          url: \"https://www.google.com/maps/search/tromso+northern+lights\"\n        }];\n      default:\n        return [];\n    }\n  })();\n  const personaStory = craftPersonaStory();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"result-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result-card enhanced\",\n      ref: cardRef,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-btn\",\n        onClick: () => {\n          try {\n            audioRef.current && audioRef.current.pause();\n          } catch {}\n          onClose();\n        },\n        children: \"\\u2716\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"result-top\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animal-emoji-giant\",\n          children: base.animal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"persona-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: base.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"tagline\",\n            children: personaStory[1]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"result-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Your vibe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"small\",\n              children: personaStory[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"micro-itinerary\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Micro-itinerary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: answers !== null && answers !== void 0 && answers.style ? `Start with a ${answers.style.replace(/\\p{Extended_Pictographic}/u, '').trim()}-style kickoff` : 'Kickoff day with local highlights'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: answers !== null && answers !== void 0 && answers.setting ? `Explore ${answers.setting}` : 'Discover local favorites'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: answers !== null && answers !== void 0 && answers.pace ? `${answers.pace} days with curated spots` : 'Relax and take it slow'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cta-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary\",\n                onClick: requestGeolocationAndFind,\n                children: loadingPlaces ? \"Finding places…\" : \"Find Places Nearby\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-ghost\",\n                onClick: toggleSound,\n                children: playing ? \"🔇 Stop Sound\" : \"🔊 Feel Travel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-download\",\n                onClick: downloadCard,\n                children: \"Download Card (PNG)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right\",\n          children: coords ? /*#__PURE__*/_jsxDEV(MapExplorer, {\n            center: coords,\n            places: places.length ? places : fallbackSuggestions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"places-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Suggested places\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this), (places.length ? places : fallbackSuggestions).slice(0, 6).map((p, i) => {\n              var _p$tags, _fallbackSuggestions$, _p$url;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"place-line\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"place-name\",\n                  children: ((_p$tags = p.tags) === null || _p$tags === void 0 ? void 0 : _p$tags.name) || p.display_name || p.name || p.name || ((_fallbackSuggestions$ = fallbackSuggestions[i]) === null || _fallbackSuggestions$ === void 0 ? void 0 : _fallbackSuggestions$.name)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"open-google\",\n                  href: (_p$url = p.url) !== null && _p$url !== void 0 ? _p$url : `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(p.lat + \",\" + p.lon)}`,\n                  target: \"_blank\",\n                  rel: \"noreferrer\",\n                  children: \"Open in Maps\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 21\n                }, this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this);\n            }), errorPlaces && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error\",\n              children: errorPlaces\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"linkedin-caption\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"LinkedIn caption\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          readOnly: true,\n          rows: 3,\n          value: `My travel persona: ${base.name} ${base.animal}\\nA short plan: ${personaStory[1]}\\n#TravelQuiz #NICDemo`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"copyright\",\n        children: \"\\xA9 hasini de silva\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this);\n}\n_s(TravelResult, \"M+I8E5nRXHWI8vIETYpFRoqkgMw=\");\n_c = TravelResult;\nvar _c;\n$RefreshReg$(_c, \"TravelResult\");","map":{"version":3,"names":["React","useEffect","useRef","useState","personas","MapExplorer","htmlToImage","jsxDEV","_jsxDEV","buildOverpassFiltersForPersona","personaKey","fetchPlacesOverpass","lat","lon","radius","limit","filters","clauses","map","f","join","q","url","encodeURIComponent","res","fetch","ok","Error","status","data","json","elements","TravelResult","answers","nicState","onClose","_s","_answers$style","setPersonaKey","style","base","name","animal","img","sound","coords","setCoords","places","setPlaces","loadingPlaces","setLoadingPlaces","errorPlaces","setErrorPlaces","playing","setPlaying","audioRef","cardRef","_answers$style2","current","Audio","loop","pause","toggleSound","play","e","console","error","alert","requestGeolocationAndFind","navigator","geolocation","getCurrentPosition","pos","latitude","longitude","el","err","warn","timeout","maximumAge","downloadCard","watermark","document","createElement","position","right","bottom","color","fontSize","fontWeight","innerText","appendChild","dataUrl","toPng","cacheBust","a","href","download","replace","body","click","remove","craftPersonaStory","_match","p","settingEmoji","setting","match","pace","palette","includes","fallbackSuggestions","personaStory","className","children","ref","onClick","fileName","_jsxFileName","lineNumber","columnNumber","trim","center","length","slice","i","_p$tags","_fallbackSuggestions$","_p$url","tags","display_name","target","rel","readOnly","rows","value","_c","$RefreshReg$"],"sources":["C:/Users/HASINI/Desktop/HTML/MY PROJ/nic-dob-calculator/src/components/travel/TravelResult.jsx"],"sourcesContent":["// src/components/travel/TravelResult.jsx\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport personas from \"./personas\";\r\nimport MapExplorer from \"./MapExplorer\";\r\nimport * as htmlToImage from \"html-to-image\";\r\nimport \"../TravelResult.css\"; // styles below\r\n\r\n// Build an Overpass tiny query for persona\r\nfunction buildOverpassFiltersForPersona(personaKey) {\r\n  // return array of element filters for Overpass (node/way)\r\n  switch (personaKey) {\r\n    case \"🌴 Relaxation\":\r\n      return [\r\n        'node[\"natural\"=\"beach\"]',\r\n        'way[\"natural\"=\"beach\"]',\r\n        'node[\"tourism\"=\"hotel\"]',\r\n        'node[\"tourism\"=\"resort\"]',\r\n      ];\r\n    case \"🗺 Adventure\":\r\n      return [\r\n        'node[\"tourism\"=\"attraction\"]',\r\n        'node[\"leisure\"=\"trail\"]',\r\n        'way[\"highway\"=\"path\"]',\r\n        'node[\"tourism\"=\"viewpoint\"]',\r\n      ];\r\n    case \"🏛 Culture\":\r\n      return [\r\n        'node[\"tourism\"=\"museum\"]',\r\n        'node[\"historic\"]',\r\n        'node[\"amenity\"=\"theatre\"]',\r\n      ];\r\n    case \"🎉 Party\":\r\n      return [\r\n        'node[\"amenity\"=\"nightclub\"]',\r\n        'node[\"amenity\"=\"bar\"]',\r\n        'node[\"amenity\"=\"restaurant\"]',\r\n      ];\r\n    case \"🍜 Foodie\":\r\n      return [\r\n        'node[\"amenity\"=\"restaurant\"]',\r\n        'node[\"amenity\"=\"cafe\"]',\r\n        'node[\"amenity\"=\"fast_food\"]',\r\n      ];\r\n    case \"❄ Arctic\":\r\n      return [\r\n        'node[\"natural\"=\"peak\"]',\r\n        'node[\"tourism\"=\"information\"]',\r\n        'node[\"natural\"=\"glacier\"]',\r\n      ];\r\n    default:\r\n      return ['node[\"tourism\"=\"attraction\"]'];\r\n  }\r\n}\r\n\r\n// fetch Overpass places around lat/lon (radius meters)\r\nasync function fetchPlacesOverpass(lat, lon, personaKey, radius = 30000, limit = 20) {\r\n  const filters = buildOverpassFiltersForPersona(personaKey);\r\n  // Construct Overpass QL\r\n  const clauses = filters\r\n    .map((f) => `${f}(around:${radius},${lat},${lon});`)\r\n    .join(\"\");\r\n  const q = `[out:json][timeout:25];(${clauses});out center ${limit};`;\r\n  const url = \"https://overpass-api.de/api/interpreter?data=\" + encodeURIComponent(q);\r\n  const res = await fetch(url);\r\n  if (!res.ok) throw new Error(\"Overpass failed: \" + res.status);\r\n  const data = await res.json();\r\n  return data.elements || [];\r\n}\r\n\r\nexport default function TravelResult({ answers = null, nicState = {}, onClose = () => {} }) {\r\n  const [personaKey, setPersonaKey] = useState(answers?.style ?? null);\r\n  const base = (personaKey && personas[personaKey]) ? personas[personaKey] : {\r\n    name: \"Traveler\",\r\n    animal: \"🌍\",\r\n    img: \"default.jpg\",\r\n    sound: null\r\n  };\r\n\r\n  const [coords, setCoords] = useState(null); // [lat, lon]\r\n  const [places, setPlaces] = useState([]);\r\n  const [loadingPlaces, setLoadingPlaces] = useState(false);\r\n  const [errorPlaces, setErrorPlaces] = useState(null);\r\n  const [playing, setPlaying] = useState(false);\r\n  const audioRef = useRef(null);\r\n  const cardRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // personaKey from answers\r\n    setPersonaKey(answers?.style ?? null);\r\n  }, [answers]);\r\n\r\n  useEffect(() => {\r\n    // preload audio if exists\r\n    if (base.sound) {\r\n      audioRef.current = new Audio(base.sound);\r\n      audioRef.current.loop = true;\r\n    } else {\r\n      audioRef.current = null;\r\n    }\r\n    return () => {\r\n      if (audioRef.current) {\r\n        try { audioRef.current.pause(); } catch {}\r\n        audioRef.current = null;\r\n      }\r\n    };\r\n  }, [personaKey]);\r\n\r\n  const toggleSound = async () => {\r\n    if (!audioRef.current) return;\r\n    if (playing) {\r\n      audioRef.current.pause();\r\n      setPlaying(false);\r\n    } else {\r\n      try {\r\n        await audioRef.current.play();\r\n        setPlaying(true);\r\n      } catch (e) {\r\n        // autoplay may be blocked; user interaction required. handle gracefully.\r\n        console.error(\"Audio play error\", e);\r\n        alert(\"Audio playback blocked by browser — click the button again to enable sound.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const requestGeolocationAndFind = () => {\r\n    setErrorPlaces(null);\r\n    setLoadingPlaces(true);\r\n    if (!navigator.geolocation) {\r\n      setErrorPlaces(\"Geolocation not supported. Showing fallback suggestions.\");\r\n      setLoadingPlaces(false);\r\n      return;\r\n    }\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (pos) => {\r\n        const lat = pos.coords.latitude;\r\n        const lon = pos.coords.longitude;\r\n        setCoords([lat, lon]);\r\n        try {\r\n          const el = await fetchPlacesOverpass(lat, lon, personaKey, 30000, 20);\r\n          setPlaces(el);\r\n        } catch (err) {\r\n          console.error(err);\r\n          setErrorPlaces(\"Places fetch failed. Try again later.\");\r\n        } finally {\r\n          setLoadingPlaces(false);\r\n        }\r\n      },\r\n      (err) => {\r\n        console.warn(\"geolocation denied\", err);\r\n        setErrorPlaces(\"Geolocation denied. Use fallback suggestions.\");\r\n        setLoadingPlaces(false);\r\n      },\r\n      { timeout: 15000, maximumAge: 60 * 1000 }\r\n    );\r\n  };\r\n\r\n  const downloadCard = async () => {\r\n    if (!cardRef.current) return alert(\"Card element missing.\");\r\n    // append watermark in DOM (visible in exported image)\r\n    const watermark = document.createElement(\"div\");\r\n    watermark.style.position = \"absolute\";\r\n    watermark.style.right = \"10px\";\r\n    watermark.style.bottom = \"8px\";\r\n    watermark.style.color = \"rgba(0,0,0,0.6)\";\r\n    watermark.style.fontSize = \"12px\";\r\n    watermark.style.fontWeight = \"600\";\r\n    watermark.innerText = \"© hasini de silva\";\r\n    cardRef.current.appendChild(watermark);\r\n\r\n    try {\r\n      const dataUrl = await htmlToImage.toPng(cardRef.current, { cacheBust: true });\r\n      const a = document.createElement(\"a\");\r\n      a.href = dataUrl;\r\n      a.download = `${base.name.replace(/\\s+/g, \"_\")}_travel_card.png`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      a.remove();\r\n    } catch (err) {\r\n      console.error(\"export fail\", err);\r\n      alert(\"Export failed in this browser. You can still copy text manually.\");\r\n    } finally {\r\n      watermark.remove();\r\n    }\r\n  };\r\n\r\n  // derive some generated suggestions (frontend-only) — more creative than echoing answers\r\n  function craftPersonaStory() {\r\n    // combine persona, setting and pace into a creative title + short plan\r\n    const p = base.name;\r\n    const settingEmoji = (answers?.setting || \"\").match(/[\\u{1F300}-\\u{1FAFF}]/u)?.[0] || \"\";\r\n    const pace = answers?.pace || \"\";\r\n    const palette = [\r\n      `${p} — ${settingEmoji} ${answers?.setting || \"destination\"}`,\r\n      `Tagline: ${pace.includes(\"Slow\") ? \"Breathe, unwind & soak in quiet moments.\" : pace.includes(\"Fast\") ? \"Fast tracks, big thrills.\" : \"A balanced wander with hidden gems.\"}`,\r\n    ];\r\n    return palette;\r\n  }\r\n\r\n  // fallback curated suggestions if geolocation / Overpass fails\r\n  const fallbackSuggestions = (() => {\r\n    switch (personaKey) {\r\n      case \"🌴 Relaxation\": return [{ name: \"Maldives — Atoll beaches\", lat: 3.2028, lon: 73.2207, url: \"https://www.google.com/maps/search/maldives+beach\" }];\r\n      case \"🗺 Adventure\": return [{ name: \"Chiang Mai treks, Thailand\", lat: 18.7883, lon: 98.9853, url: \"https://www.google.com/maps/search/chiang+mai+trekking\" }];\r\n      case \"🏛 Culture\": return [{ name: \"Florence, Italy — art & history\", lat: 43.7696, lon: 11.2558, url: \"https://www.google.com/maps/search/florence+italy+duomo\" }];\r\n      case \"🎉 Party\": return [{ name: \"Ibiza, Spain — nightlife\", lat: 38.9067, lon: 1.4206, url: \"https://www.google.com/maps/search/ibiza+party\" }];\r\n      case \"🍜 Foodie\": return [{ name: \"Bangkok street food, Thailand\", lat: 13.7563, lon: 100.5018, url: \"https://www.google.com/maps/search/bangkok+street+food\" }];\r\n      case \"❄ Arctic\": return [{ name: \"Tromsø, Norway — northern lights\", lat: 69.6492, lon: 18.9553, url: \"https://www.google.com/maps/search/tromso+northern+lights\" }];\r\n      default: return [];\r\n    }\r\n  })();\r\n\r\n  const personaStory = craftPersonaStory();\r\n\r\n  return (\r\n    <div className=\"result-overlay\">\r\n      <div className=\"result-card enhanced\" ref={cardRef}>\r\n        <button className=\"close-btn\" onClick={() => { try { audioRef.current && audioRef.current.pause(); } catch {} onClose(); }}>✖</button>\r\n\r\n        <div className=\"result-top\">\r\n          <div className=\"animal-emoji-giant\">{base.animal}</div>\r\n          <div className=\"persona-title\">\r\n            <h2>{base.name}</h2>\r\n            <p className=\"tagline\">{personaStory[1]}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"result-body\">\r\n          <div className=\"left\">\r\n            <div className=\"summary-card\">\r\n              <h3>Your vibe</h3>\r\n              <p className=\"small\">{personaStory[0]}</p>\r\n              <div className=\"micro-itinerary\">\r\n                <strong>Micro-itinerary</strong>\r\n                <ol>\r\n                  <li>{answers?.style ? `Start with a ${answers.style.replace(/\\p{Extended_Pictographic}/u,'').trim()}-style kickoff` : 'Kickoff day with local highlights'}</li>\r\n                  <li>{answers?.setting ? `Explore ${answers.setting}` : 'Discover local favorites'}</li>\r\n                  <li>{answers?.pace ? `${answers.pace} days with curated spots` : 'Relax and take it slow'}</li>\r\n                </ol>\r\n              </div>\r\n\r\n              <div className=\"cta-row\">\r\n                <button className=\"btn-primary\" onClick={requestGeolocationAndFind}>\r\n                  {loadingPlaces ? \"Finding places…\" : \"Find Places Nearby\"}\r\n                </button>\r\n\r\n                <button className=\"btn-ghost\" onClick={toggleSound}>\r\n                  {playing ? \"🔇 Stop Sound\" : \"🔊 Feel Travel\"}\r\n                </button>\r\n\r\n                <button className=\"btn-download\" onClick={downloadCard}>\r\n                  Download Card (PNG)\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"right\">\r\n            {/* Map view or fallback list */}\r\n            {coords ? (\r\n              <MapExplorer center={coords} places={places.length ? places : fallbackSuggestions} />\r\n            ) : (\r\n              <div className=\"places-list\">\r\n                <h4>Suggested places</h4>\r\n                {(places.length ? places : fallbackSuggestions).slice(0,6).map((p, i) => (\r\n                  <div key={i} className=\"place-line\">\r\n                    <div className=\"place-name\">{p.tags?.name || p.display_name || p.name || p.name || fallbackSuggestions[i]?.name}</div>\r\n                    <a className=\"open-google\" href={p.url ?? `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(p.lat + \",\" + p.lon)}`} target=\"_blank\" rel=\"noreferrer\">Open in Maps</a>\r\n                  </div>\r\n                ))}\r\n                {errorPlaces && <div className=\"error\">{errorPlaces}</div>}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"linkedin-caption\">\r\n          <strong>LinkedIn caption</strong>\r\n          <textarea readOnly rows={3} value={`My travel persona: ${base.name} ${base.animal}\\nA short plan: ${personaStory[1]}\\n#TravelQuiz #NICDemo`} />\r\n        </div>\r\n\r\n        <div className=\"copyright\">© hasini de silva</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}