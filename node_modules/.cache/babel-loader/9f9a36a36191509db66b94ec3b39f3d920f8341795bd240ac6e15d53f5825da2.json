{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HASINI\\\\Desktop\\\\HTML\\\\MY PROJ\\\\nic-dob-calculator\\\\src\\\\components\\\\travel\\\\TravelResult.jsx\",\n  _s = $RefreshSig$();\n// TravelResult.jsx\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport * as htmlToImage from \"html-to-image\";\nimport personas from \"./personas\"; // keep your personas.jsx in same folder\nimport MapExplorer from \"./MapExplorer\"; // optional; if present show embedded map\nimport \"./TravelResult.css\";\n\n/*\r\n  Advanced TravelResult:\r\n  - answers: quiz answers\r\n  - nicState: optional { birthday, age, gender }\r\n  - onClose: callback\r\n*/\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PER_DAY_BASE = {\n  \"🌴 Relaxation\": 120,\n  \"🗺 Adventure\": 150,\n  \"🏛 Culture\": 110,\n  \"🎉 Party\": 160,\n  \"🍜 Foodie\": 100,\n  \"❄ Arctic\": 180\n};\n\n// companion multipliers keyed by labels used in your quiz\nconst COMPANION_MULTIPLIER = {\n  \"🧳 Solo\": 0.8,\n  \"👯 Friends\": 1.15,\n  \"💑 Partner\": 1.02,\n  \"👨‍👩‍👧 Family\": 1.25\n};\nfunction groupDiscountFactor(n) {\n  if (n >= 10) return 0.90;\n  if (n >= 5) return 0.95;\n  return 1.0;\n}\nfunction ageDiscountFactor(age) {\n  if (age === null || age === undefined) return 1.0;\n  if (age < 18) return 0.85;\n  if (age >= 60) return 0.90;\n  return 1.0;\n}\n\n// Overpass fetch used by MapExplorer earlier if you want markers\nasync function fetchPlacesOverpass(lat, lon, personaKey, radius = 30000, limit = 20) {\n  const filtersMap = {\n    \"🌴 Relaxation\": ['node[\"natural\"=\"beach\"]', 'way[\"natural\"=\"beach\"]', 'node[\"tourism\"=\"resort\"]', 'node[\"tourism\"=\"hotel\"]'],\n    \"🗺 Adventure\": ['node[\"tourism\"=\"attraction\"]', 'node[\"leisure\"=\"trail\"]', 'node[\"tourism\"=\"viewpoint\"]'],\n    \"🏛 Culture\": ['node[\"tourism\"=\"museum\"]', 'node[\"historic\"]', 'node[\"amenity\"=\"theatre\"]'],\n    \"🎉 Party\": ['node[\"amenity\"=\"nightclub\"]', 'node[\"amenity\"=\"bar\"]', 'node[\"amenity\"=\"restaurant\"]'],\n    \"🍜 Foodie\": ['node[\"amenity\"=\"restaurant\"]', 'node[\"amenity\"=\"cafe\"]', 'node[\"amenity\"=\"fast_food\"]'],\n    \"❄ Arctic\": ['node[\"natural\"=\"peak\"]', 'node[\"natural\"=\"glacier\"]', 'node[\"tourism\"=\"information\"]']\n  };\n  const filters = filtersMap[personaKey] || ['node[\"tourism\"=\"attraction\"]'];\n  const clauses = filters.map(f => `${f}(around:${radius},${lat},${lon});`).join(\"\");\n  const q = `[out:json][timeout:25];(${clauses});out center ${limit};`;\n  const url = \"https://overpass-api.de/api/interpreter?data=\" + encodeURIComponent(q);\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(\"Overpass failed: \" + res.status);\n  const json = await res.json();\n  return json.elements || [];\n}\n\n// WebAudio ambient generator (no mp3 needed)\n// Creates a gentle ambient loop depending on persona theme.\nfunction createAmbientEngine(theme) {\n  // returns { start(), stop() }\n  let ctx = null;\n  let noiseNode = null;\n  let gain = null;\n  let osc = null;\n  let isStarted = false;\n  function start() {\n    if (isStarted) return;\n    ctx = new (window.AudioContext || window.webkitAudioContext)();\n    gain = ctx.createGain();\n    gain.gain.value = 0.0; // start muted, fade in\n    gain.connect(ctx.destination);\n\n    // noise buffer (used as base texture)\n    const bufferSize = ctx.sampleRate * 1; // 1s\n    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\n    const data = buffer.getChannelData(0);\n    for (let i = 0; i < bufferSize; i++) {\n      data[i] = (Math.random() * 2 - 1) * 0.2;\n    }\n    noiseNode = ctx.createBufferSource();\n    noiseNode.buffer = buffer;\n    noiseNode.loop = true;\n\n    // filter choice per theme\n    const filter = ctx.createBiquadFilter();\n    if (theme === \"beach\") {\n      filter.type = \"lowpass\";\n      filter.frequency.value = 1200;\n    } else if (theme === \"forest\") {\n      filter.type = \"bandpass\";\n      filter.frequency.value = 800;\n    } else if (theme === \"city\") {\n      filter.type = \"highpass\";\n      filter.frequency.value = 600;\n    } else if (theme === \"party\") {\n      filter.type = \"lowpass\";\n      filter.frequency.value = 1500;\n    } else {\n      filter.type = \"lowpass\";\n      filter.frequency.value = 1000;\n    }\n    noiseNode.connect(filter);\n    filter.connect(gain);\n\n    // gentle oscillator to add movement\n    osc = ctx.createOscillator();\n    osc.type = \"sine\";\n    osc.frequency.value = theme === \"party\" ? 0.7 : 0.3;\n    const oscGain = ctx.createGain();\n    oscGain.gain.value = 0.02;\n    osc.connect(oscGain);\n    oscGain.connect(gain);\n    noiseNode.start();\n    osc.start();\n    // fade in\n    gain.gain.linearRampToValueAtTime(0.35, ctx.currentTime + 1.2);\n    isStarted = true;\n  }\n  function stop() {\n    if (!isStarted) return;\n    try {\n      gain.gain.linearRampToValueAtTime(0.001, ctx.currentTime + 0.8);\n      setTimeout(() => {\n        noiseNode.stop();\n        osc.stop();\n        ctx.close();\n        ctx = null;\n        noiseNode = null;\n        osc = null;\n        gain = null;\n        isStarted = false;\n      }, 900);\n    } catch {\n      // ignore\n    }\n  }\n  return {\n    start,\n    stop\n  };\n}\nexport default function TravelResult({\n  answers,\n  nicState = {},\n  onClose = () => {}\n}) {\n  _s();\n  var _PER_DAY_BASE$persona, _COMPANION_MULTIPLIER;\n  if (!answers) return null;\n  const personaKey = answers.style || Object.keys(personas)[0];\n  const base = personas[personaKey] || {\n    name: \"Traveler\",\n    animal: \"🌍\",\n    img: \"/default.jpg\",\n    theme: \"city\"\n  };\n\n  // UI state\n  const [numPeople, setNumPeople] = useState(1);\n  const [days, setDays] = useState(3);\n  const [companion, setCompanion] = useState(answers.companion || \"🧳 Solo\");\n  const [coords, setCoords] = useState(null);\n  const [places, setPlaces] = useState([]);\n  const [loadingPlaces, setLoadingPlaces] = useState(false);\n  const [errorPlaces, setErrorPlaces] = useState(null);\n  const [playingAmbient, setPlayingAmbient] = useState(false);\n  const ambientRef = useRef(null);\n  const cardRef = useRef(null);\n\n  // cost math\n  const perDay = (_PER_DAY_BASE$persona = PER_DAY_BASE[personaKey]) !== null && _PER_DAY_BASE$persona !== void 0 ? _PER_DAY_BASE$persona : 120;\n  const companionMult = (_COMPANION_MULTIPLIER = COMPANION_MULTIPLIER[companion]) !== null && _COMPANION_MULTIPLIER !== void 0 ? _COMPANION_MULTIPLIER : 1.0;\n  const groupFactor = groupDiscountFactor(numPeople);\n  const ageFactor = ageDiscountFactor(nicState.age);\n  const subtotal = perDay * days * numPeople;\n  const afterCompanion = subtotal * companionMult;\n  const afterGroup = afterCompanion * groupFactor;\n  const afterAge = afterGroup * ageFactor;\n  const serviceFee = Math.round(afterAge * 0.08);\n  const total = Math.round(afterAge + serviceFee);\n\n  // preload ambient engine (no mp3s)\n  useEffect(() => {\n    ambientRef.current = createAmbientEngine(base.theme || \"city\");\n    return () => {\n      try {\n        ambientRef.current && ambientRef.current.stop();\n      } catch {}\n    };\n  }, [personaKey]);\n\n  // toggle ambient sound\n  const handleToggleAmbient = () => {\n    if (!ambientRef.current) {\n      ambientRef.current = createAmbientEngine(base.theme || \"city\");\n    }\n    if (playingAmbient) {\n      ambientRef.current.stop();\n      setPlayingAmbient(false);\n    } else {\n      ambientRef.current.start();\n      setPlayingAmbient(true);\n    }\n  };\n\n  // find places via Overpass (and set coords using geolocation)\n  const handleFindPlacesNearby = () => {\n    setErrorPlaces(null);\n    setLoadingPlaces(true);\n    if (!navigator.geolocation) {\n      setErrorPlaces(\"Geolocation not available in this browser.\");\n      setLoadingPlaces(false);\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(async pos => {\n      const lat = pos.coords.latitude;\n      const lon = pos.coords.longitude;\n      setCoords([lat, lon]);\n      try {\n        const els = await fetchPlacesOverpass(lat, lon, personaKey, 30000, 20);\n        setPlaces(els);\n        if (!els.length) setErrorPlaces(\"No nearby POIs found for this category — try Google Maps button below.\");\n      } catch (err) {\n        console.error(err);\n        setErrorPlaces(\"Places lookup failed (Overpass). You can use the Google Maps search button instead.\");\n      } finally {\n        setLoadingPlaces(false);\n      }\n    }, err => {\n      console.warn(\"geo error\", err);\n      setErrorPlaces(\"Geolocation denied or timed out. Use Google Maps search instead.\");\n      setLoadingPlaces(false);\n    }, {\n      timeout: 15000\n    });\n  };\n\n  /*\r\n  // download PNG with watermark\r\n  const handleDownload = async () => {\r\n  if (!cardRef.current) return;\r\n  // create wrapper that preserves gradient + size\r\n  const exportWrapper = document.createElement(\"div\");\r\n  const w = cardRef.current.offsetWidth || 1000;\r\n  exportWrapper.style.width = w + \"px\";\r\n  exportWrapper.style.display = \"inline-block\";\r\n  exportWrapper.style.position = \"relative\";\r\n  exportWrapper.style.padding = \"18px\";\r\n  exportWrapper.style.borderRadius = \"16px\";\r\n  // nice gradient background for export\r\n  exportWrapper.style.background = \"linear-gradient(135deg,#ffecd2,#fcb69f)\";\r\n  exportWrapper.style.boxShadow = \"0 20px 60px rgba(4,20,40,0.25)\";\r\n  exportWrapper.style.fontFamily = getComputedStyle(cardRef.current).fontFamily || \"Poppins, system-ui\";\r\n    // clone card and append\r\n  const clone = cardRef.current.cloneNode(true);\r\n    // remove overlay/backdrop elements in the clone that might conflict\r\n  // (if you added dynamic elements like .result-overlay, remove them)\r\n  // keep only the inner content card\r\n  clone.style.margin = \"0\";\r\n  clone.style.boxShadow = \"none\"; // let wrapper provide shadow\r\n  exportWrapper.appendChild(clone);\r\n    // watermark\r\n  const watermark = document.createElement(\"div\");\r\n  watermark.innerText = \"© hasini de silva\";\r\n  watermark.style.position = \"absolute\";\r\n  watermark.style.right = \"12px\";\r\n  watermark.style.bottom = \"10px\";\r\n  watermark.style.fontSize = \"12px\";\r\n  watermark.style.color = \"rgba(0,0,0,0.55)\";\r\n  watermark.style.fontWeight = \"700\";\r\n  exportWrapper.appendChild(watermark);\r\n    document.body.appendChild(exportWrapper);\r\n  try {\r\n    const dataUrl = await htmlToImage.toPng(exportWrapper, { cacheBust: true });\r\n    const a = document.createElement(\"a\");\r\n    a.href = dataUrl;\r\n    a.download = `${base.name.replace(/\\s+/g, \"_\")}_travel_card.png`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    a.remove();\r\n  } catch (err) {\r\n    console.error(\"export fail\", err);\r\n    alert(\"Export failed in this browser. Try another browser or update your browser.\");\r\n  } finally {\r\n    exportWrapper.remove();\r\n  }\r\n  };  */\n\n  // NEW ref for Plan & Cost only\n  const planRef = useRef(null);\n  const handleDownload = async () => {\n    if (!planRef.current) return;\n\n    // create wrapper for export\n    const exportWrapper = document.createElement(\"div\");\n    exportWrapper.style.padding = \"20px\";\n    exportWrapper.style.borderRadius = \"16px\";\n    exportWrapper.style.background = \"linear-gradient(135deg,#f6d365,#fda085)\";\n    exportWrapper.style.boxShadow = \"0 12px 32px rgba(0,0,0,0.2)\";\n    exportWrapper.style.fontFamily = \"Poppins, system-ui\";\n    exportWrapper.style.display = \"inline-block\";\n    exportWrapper.style.position = \"relative\";\n\n    // clone only Plan & Cost area\n    const clone = planRef.current.cloneNode(true);\n    clone.style.margin = \"0\";\n    clone.style.boxShadow = \"none\";\n    exportWrapper.appendChild(clone);\n\n    // watermark\n    const watermark = document.createElement(\"div\");\n    watermark.innerText = \"© hasini de silva\";\n    watermark.style.position = \"absolute\";\n    watermark.style.right = \"12px\";\n    watermark.style.bottom = \"10px\";\n    watermark.style.fontSize = \"12px\";\n    watermark.style.color = \"rgba(0,0,0,0.6)\";\n    watermark.style.fontWeight = \"600\";\n    exportWrapper.appendChild(watermark);\n    document.body.appendChild(exportWrapper);\n    try {\n      const dataUrl = await htmlToImage.toPng(exportWrapper, {\n        cacheBust: true\n      });\n      const a = document.createElement(\"a\");\n      a.href = dataUrl;\n      a.download = `${base.name.replace(/\\s+/g, \"_\")}_plan_cost.png`;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    } catch (err) {\n      console.error(\"export fail\", err);\n      alert(\"Export failed. Try another browser.\");\n    } finally {\n      exportWrapper.remove();\n    }\n  };\n\n  // open google maps search for category near given coords (if available)\n  const openGoogleMapsSearch = categoryLabel => {\n    const q = encodeURIComponent(categoryLabel);\n    if (coords && coords.length === 2) {\n      const [lat, lon] = coords;\n      // open maps search centered on lat/lon\n      const url = `https://www.google.com/maps/search/${q}/@${lat},${lon},13z`;\n      window.open(url, \"_blank\");\n    } else {\n      // use 'near me' search (browser/Google will prompt)\n      const url = `https://www.google.com/maps/search/${q}+near+me`;\n      window.open(url, \"_blank\");\n    }\n  };\n\n  // open google maps for a specific lat/lon (navigate)\n  const openInGoogleMaps = (lat, lon, name) => {\n    const q = encodeURIComponent(`${name ? name + \" \" : \"\"}${lat},${lon}`);\n    const url = `https://www.google.com/maps/search/?api=1&query=${q}`;\n    window.open(url, \"_blank\");\n  };\n\n  // produce short category query for Google Maps from persona\n  function personaCategoryQuery() {\n    switch (personaKey) {\n      case \"🌴 Relaxation\":\n        return \"beach\";\n      case \"🗺 Adventure\":\n        return \"hiking trail\";\n      case \"🏛 Culture\":\n        return \"museum\";\n      case \"🎉 Party\":\n        return \"nightclub\";\n      case \"🍜 Foodie\":\n        return \"street food\";\n      case \"❄ Arctic\":\n        return \"scenic viewpoint\";\n      default:\n        return \"tourist attractions\";\n    }\n  }\n\n  // creative micro suggestions\n  const creativeSuggestions = (() => {\n    if (personaKey === \"🎉 Party\") return [\"Sunset rooftop party\", \"Local DJ event\", \"Beach club day-pass\"];\n    if (personaKey === \"🗺 Adventure\") return [\"Sunrise trek + viewpoint\", \"Water activity\", \"Village cultural trail\"];\n    if (personaKey === \"🌴 Relaxation\") return [\"Sunset yoga\", \"Island boat lunch\", \"Spa afternoon\"];\n    if (personaKey === \"🏛 Culture\") return [\"Guided museum tour\", \"Cooking class\", \"Heritage walk\"];\n    if (personaKey === \"🍜 Foodie\") return [\"Night market tour\", \"Street-food crawl\", \"Chef table tasting\"];\n    if (personaKey === \"❄ Arctic\") return [\"Northern lights chase\", \"Ice-scenic boat trip\", \"Local lodge stay\"];\n    return [];\n  })();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"result-overlay refined\",\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"result-card refined\",\n      ref: cardRef,\n      initial: {\n        opacity: 0,\n        scale: 0.96\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        duration: 0.28\n      },\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-btn\",\n        onClick: () => {\n          try {\n            ambientRef.current && ambientRef.current.stop();\n          } catch {}\n          onClose();\n        },\n        children: \"\\u2716\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animal-wrap\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animal-emoji\",\n              children: base.animal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"persona-name\",\n              children: base.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"small-meta\",\n              children: [(answers === null || answers === void 0 ? void 0 : answers.setting) || \"Curated experience\", \" \\xB7 \", (answers === null || answers === void 0 ? void 0 : answers.pace) || \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"estimate-chip\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"estimate-label\",\n            children: \"Estimated total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"estimate-amount\",\n            children: [\"$\", total]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"per-person\",\n            children: [\"Per person: $\", Math.round(total / numPeople)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"card-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"left-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), \" className=\\\"export-card\\\" ref=\", planRef, \">\", /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"persona-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"persona-icon\",\n              children: persona.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"persona-name\",\n              children: persona.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"panel glass\",\n            ref: planRef,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Plan & Cost\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inputs-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Travelers\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"1\",\n                  value: numPeople,\n                  onChange: e => setNumPeople(Math.max(1, Number(e.target.value) || 1))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Days\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"1\",\n                  value: days,\n                  onChange: e => setDays(Math.max(1, Number(e.target.value) || 1))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Companion\", /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: companion,\n                  onChange: e => setCompanion(e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"\\uD83E\\uDDF3 Solo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 438,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"\\uD83D\\uDC91 Partner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"\\uD83D\\uDC6F Friends\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    children: \"\\uD83D\\uDC68\\u200D\\uD83D\\uDC69\\u200D\\uD83D\\uDC67 Family\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 441,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cost-break\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Base/day \\xD7 days \\xD7 people\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 40\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", perDay, \" \\xD7 \", days, \" \\xD7 \", numPeople, \" = \", /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: [\"$\", Math.round(perDay * days * numPeople)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 115\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 75\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Companion multiplier\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 40\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"x \", companionMult.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 71\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Group discount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 40\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"x \", groupFactor.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 65\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Age discount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 40\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"x \", ageFactor.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Service & taxes (8%)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 40\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", serviceFee]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 71\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row final\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 453,\n                    columnNumber: 51\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 46\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"big\",\n                  children: [\"$\", total]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 79\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row small-note\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Per person\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 51\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\"$\", Math.round(total / numPeople)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 72\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"actions-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn primary\",\n                onClick: handleFindPlacesNearby,\n                children: loadingPlaces ? \"Finding…\" : \"Find Places Nearby\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn ghost\",\n                onClick: () => openGoogleMapsSearch(personaCategoryQuery()),\n                children: \"Open in Google Maps\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn alt\",\n                onClick: handleToggleAmbient,\n                children: playingAmbient ? \"🔇 Stop Feel Travel\" : \"🔊 Feel Travel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn download\",\n                onClick: handleDownload,\n                children: \"Download Card (PNG)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"panel suggestions\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Creative suggestions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: creativeSuggestions.map((s, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: s\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 55\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"panel linkedin\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"LinkedIn caption preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              readOnly: true,\n              rows: 4,\n              value: `🌍 My travel persona: ${base.name} ${base.animal}\n                💰 Estimated trip: $${total} for ${numPeople} people · ${days} days.\n                ✨ Style: ${personaCategoryQuery()}\n                #TravelQuiz #NICDemo`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn copy\",\n              onClick: () => {\n                navigator.clipboard.writeText(`🌍 My travel persona: ${base.name} ${base.animal}\n                     💰 Estimated trip: $${total} for ${numPeople} people · ${days} days.\n                     ✨ Style: ${personaCategoryQuery()}\n                     #TravelQuiz #NICDemo`).then(() => alert(\"Copied to clipboard ✅\"));\n              },\n              children: \"\\uD83D\\uDCCB Copy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n          className: \"right-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"map-embed glass\",\n            children: [coords ? /*#__PURE__*/_jsxDEV(MapExplorer, {\n              center: coords,\n              places: places\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"map-placeholder\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"map-msg\",\n                  children: \"No location yet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"map-sub\",\n                  children: [\"Click Find Places Nearby to allow location and discover local \", personaCategoryQuery(), \" spots.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"map-quick\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn primary\",\n                    onClick: handleFindPlacesNearby,\n                    children: \"Allow location & find\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 520,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn ghost\",\n                    onClick: () => openGoogleMapsSearch(personaCategoryQuery()),\n                    children: \"Open maps search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 521,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 19\n              }, this)\n            }, void 0, false), errorPlaces && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error-banner\",\n              children: errorPlaces\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"places-list glass\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Suggested places\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 15\n            }, this), (places.length ? places : fallbackSuggestions(personaKey)).slice(0, 8).map((p, i) => {\n              var _p$tags, _fallbackSuggestions$, _ref, _p$lat, _p$center, _fallbackSuggestions$2, _ref2, _p$lon, _p$center2, _fallbackSuggestions$3, _p$tags2, _p$url;\n              const name = ((_p$tags = p.tags) === null || _p$tags === void 0 ? void 0 : _p$tags.name) || p.display_name || p.name || ((_fallbackSuggestions$ = fallbackSuggestions(personaKey)[i]) === null || _fallbackSuggestions$ === void 0 ? void 0 : _fallbackSuggestions$.name) || `Place ${i + 1}`;\n              const lat = (_ref = (_p$lat = p.lat) !== null && _p$lat !== void 0 ? _p$lat : (_p$center = p.center) === null || _p$center === void 0 ? void 0 : _p$center.lat) !== null && _ref !== void 0 ? _ref : (_fallbackSuggestions$2 = fallbackSuggestions(personaKey)[i]) === null || _fallbackSuggestions$2 === void 0 ? void 0 : _fallbackSuggestions$2.lat;\n              const lon = (_ref2 = (_p$lon = p.lon) !== null && _p$lon !== void 0 ? _p$lon : (_p$center2 = p.center) === null || _p$center2 === void 0 ? void 0 : _p$center2.lon) !== null && _ref2 !== void 0 ? _ref2 : (_fallbackSuggestions$3 = fallbackSuggestions(personaKey)[i]) === null || _fallbackSuggestions$3 === void 0 ? void 0 : _fallbackSuggestions$3.lon;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"place-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"place-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"place-name\",\n                    children: name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 538,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"place-meta\",\n                    children: ((_p$tags2 = p.tags) === null || _p$tags2 === void 0 ? void 0 : _p$tags2.amenity) || p.type || \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"place-ctas\",\n                  children: lat && lon ? /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn small\",\n                    onClick: () => openInGoogleMaps(lat, lon, name),\n                    children: \"Navigate\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 543,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n                    className: \"open-google\",\n                    target: \"_blank\",\n                    rel: \"noreferrer\",\n                    href: (_p$url = p.url) !== null && _p$url !== void 0 ? _p$url : \"#\",\n                    children: \"Open\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 545,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 541,\n                  columnNumber: 21\n                }, this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"card-footer\",\n        children: \"\\xA9 hasini de silva\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 389,\n    columnNumber: 5\n  }, this);\n}\n\n// fallback suggestions helper\n_s(TravelResult, \"HS+q3cilU7tKGluhTVUeiNp0qkg=\");\n_c = TravelResult;\nfunction fallbackSuggestions(key) {\n  switch (key) {\n    case \"🌴 Relaxation\":\n      return [{\n        name: \"Maldives — Atoll beaches\",\n        lat: 3.2028,\n        lon: 73.2207\n      }];\n    case \"🗺 Adventure\":\n      return [{\n        name: \"Chiang Mai treks\",\n        lat: 18.7883,\n        lon: 98.9853\n      }];\n    case \"🏛 Culture\":\n      return [{\n        name: \"Florence, Italy — art & history\",\n        lat: 43.7696,\n        lon: 11.2558\n      }];\n    case \"🎉 Party\":\n      return [{\n        name: \"Ibiza, Spain — nightlife\",\n        lat: 38.9067,\n        lon: 1.4206\n      }];\n    case \"🍜 Foodie\":\n      return [{\n        name: \"Bangkok street food\",\n        lat: 13.7563,\n        lon: 100.5018\n      }];\n    case \"❄ Arctic\":\n      return [{\n        name: \"Tromsø, Norway — northern lights\",\n        lat: 69.6492,\n        lon: 18.9553\n      }];\n    default:\n      return [];\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"TravelResult\");","map":{"version":3,"names":["React","useEffect","useRef","useState","motion","htmlToImage","personas","MapExplorer","jsxDEV","_jsxDEV","Fragment","_Fragment","PER_DAY_BASE","COMPANION_MULTIPLIER","groupDiscountFactor","n","ageDiscountFactor","age","undefined","fetchPlacesOverpass","lat","lon","personaKey","radius","limit","filtersMap","filters","clauses","map","f","join","q","url","encodeURIComponent","res","fetch","ok","Error","status","json","elements","createAmbientEngine","theme","ctx","noiseNode","gain","osc","isStarted","start","window","AudioContext","webkitAudioContext","createGain","value","connect","destination","bufferSize","sampleRate","buffer","createBuffer","data","getChannelData","i","Math","random","createBufferSource","loop","filter","createBiquadFilter","type","frequency","createOscillator","oscGain","linearRampToValueAtTime","currentTime","stop","setTimeout","close","TravelResult","answers","nicState","onClose","_s","_PER_DAY_BASE$persona","_COMPANION_MULTIPLIER","style","Object","keys","base","name","animal","img","numPeople","setNumPeople","days","setDays","companion","setCompanion","coords","setCoords","places","setPlaces","loadingPlaces","setLoadingPlaces","errorPlaces","setErrorPlaces","playingAmbient","setPlayingAmbient","ambientRef","cardRef","perDay","companionMult","groupFactor","ageFactor","subtotal","afterCompanion","afterGroup","afterAge","serviceFee","round","total","current","handleToggleAmbient","handleFindPlacesNearby","navigator","geolocation","getCurrentPosition","pos","latitude","longitude","els","length","err","console","error","warn","timeout","planRef","handleDownload","exportWrapper","document","createElement","padding","borderRadius","background","boxShadow","fontFamily","display","position","clone","cloneNode","margin","appendChild","watermark","innerText","right","bottom","fontSize","color","fontWeight","body","dataUrl","toPng","cacheBust","a","href","download","replace","click","remove","alert","openGoogleMapsSearch","categoryLabel","open","openInGoogleMaps","personaCategoryQuery","creativeSuggestions","className","children","div","ref","initial","opacity","scale","animate","transition","duration","role","onClick","fileName","_jsxFileName","lineNumber","columnNumber","setting","pace","persona","icon","min","onChange","e","max","Number","target","toFixed","s","readOnly","rows","clipboard","writeText","then","center","fallbackSuggestions","slice","p","_p$tags","_fallbackSuggestions$","_ref","_p$lat","_p$center","_fallbackSuggestions$2","_ref2","_p$lon","_p$center2","_fallbackSuggestions$3","_p$tags2","_p$url","tags","display_name","amenity","rel","_c","key","$RefreshReg$"],"sources":["C:/Users/HASINI/Desktop/HTML/MY PROJ/nic-dob-calculator/src/components/travel/TravelResult.jsx"],"sourcesContent":["// TravelResult.jsx\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport * as htmlToImage from \"html-to-image\";\r\nimport personas from \"./personas\"; // keep your personas.jsx in same folder\r\nimport MapExplorer from \"./MapExplorer\"; // optional; if present show embedded map\r\nimport \"./TravelResult.css\";\r\n\r\n/*\r\n  Advanced TravelResult:\r\n  - answers: quiz answers\r\n  - nicState: optional { birthday, age, gender }\r\n  - onClose: callback\r\n*/\r\n\r\nconst PER_DAY_BASE = {\r\n  \"🌴 Relaxation\": 120,\r\n  \"🗺 Adventure\": 150,\r\n  \"🏛 Culture\": 110,\r\n  \"🎉 Party\": 160,\r\n  \"🍜 Foodie\": 100,\r\n  \"❄ Arctic\": 180,\r\n};\r\n\r\n// companion multipliers keyed by labels used in your quiz\r\nconst COMPANION_MULTIPLIER = {\r\n  \"🧳 Solo\": 0.8,\r\n  \"👯 Friends\": 1.15,\r\n  \"💑 Partner\": 1.02,\r\n  \"👨‍👩‍👧 Family\": 1.25,\r\n};\r\n\r\nfunction groupDiscountFactor(n) {\r\n  if (n >= 10) return 0.90;\r\n  if (n >= 5) return 0.95;\r\n  return 1.0;\r\n}\r\nfunction ageDiscountFactor(age) {\r\n  if (age === null || age === undefined) return 1.0;\r\n  if (age < 18) return 0.85;\r\n  if (age >= 60) return 0.90;\r\n  return 1.0;\r\n}\r\n\r\n// Overpass fetch used by MapExplorer earlier if you want markers\r\nasync function fetchPlacesOverpass(lat, lon, personaKey, radius = 30000, limit = 20) {\r\n  const filtersMap = {\r\n    \"🌴 Relaxation\": ['node[\"natural\"=\"beach\"]', 'way[\"natural\"=\"beach\"]', 'node[\"tourism\"=\"resort\"]', 'node[\"tourism\"=\"hotel\"]'],\r\n    \"🗺 Adventure\": ['node[\"tourism\"=\"attraction\"]', 'node[\"leisure\"=\"trail\"]', 'node[\"tourism\"=\"viewpoint\"]'],\r\n    \"🏛 Culture\": ['node[\"tourism\"=\"museum\"]', 'node[\"historic\"]', 'node[\"amenity\"=\"theatre\"]'],\r\n    \"🎉 Party\": ['node[\"amenity\"=\"nightclub\"]', 'node[\"amenity\"=\"bar\"]', 'node[\"amenity\"=\"restaurant\"]'],\r\n    \"🍜 Foodie\": ['node[\"amenity\"=\"restaurant\"]', 'node[\"amenity\"=\"cafe\"]', 'node[\"amenity\"=\"fast_food\"]'],\r\n    \"❄ Arctic\": ['node[\"natural\"=\"peak\"]', 'node[\"natural\"=\"glacier\"]', 'node[\"tourism\"=\"information\"]'],\r\n  };\r\n  const filters = filtersMap[personaKey] || ['node[\"tourism\"=\"attraction\"]'];\r\n  const clauses = filters.map(f => `${f}(around:${radius},${lat},${lon});`).join(\"\");\r\n  const q = `[out:json][timeout:25];(${clauses});out center ${limit};`;\r\n  const url = \"https://overpass-api.de/api/interpreter?data=\" + encodeURIComponent(q);\r\n  const res = await fetch(url);\r\n  if (!res.ok) throw new Error(\"Overpass failed: \" + res.status);\r\n  const json = await res.json();\r\n  return json.elements || [];\r\n}\r\n\r\n// WebAudio ambient generator (no mp3 needed)\r\n// Creates a gentle ambient loop depending on persona theme.\r\nfunction createAmbientEngine(theme) {\r\n  // returns { start(), stop() }\r\n  let ctx = null;\r\n  let noiseNode = null;\r\n  let gain = null;\r\n  let osc = null;\r\n  let isStarted = false;\r\n\r\n  function start() {\r\n    if (isStarted) return;\r\n    ctx = new (window.AudioContext || window.webkitAudioContext)();\r\n    gain = ctx.createGain();\r\n    gain.gain.value = 0.0; // start muted, fade in\r\n    gain.connect(ctx.destination);\r\n\r\n    // noise buffer (used as base texture)\r\n    const bufferSize = ctx.sampleRate * 1; // 1s\r\n    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\r\n    const data = buffer.getChannelData(0);\r\n    for (let i = 0; i < bufferSize; i++) {\r\n      data[i] = (Math.random() * 2 - 1) * 0.2;\r\n    }\r\n    noiseNode = ctx.createBufferSource();\r\n    noiseNode.buffer = buffer;\r\n    noiseNode.loop = true;\r\n\r\n    // filter choice per theme\r\n    const filter = ctx.createBiquadFilter();\r\n    if (theme === \"beach\") {\r\n      filter.type = \"lowpass\";\r\n      filter.frequency.value = 1200;\r\n    } else if (theme === \"forest\") {\r\n      filter.type = \"bandpass\";\r\n      filter.frequency.value = 800;\r\n    } else if (theme === \"city\") {\r\n      filter.type = \"highpass\";\r\n      filter.frequency.value = 600;\r\n    } else if (theme === \"party\") {\r\n      filter.type = \"lowpass\";\r\n      filter.frequency.value = 1500;\r\n    } else {\r\n      filter.type = \"lowpass\";\r\n      filter.frequency.value = 1000;\r\n    }\r\n\r\n    noiseNode.connect(filter);\r\n    filter.connect(gain);\r\n\r\n    // gentle oscillator to add movement\r\n    osc = ctx.createOscillator();\r\n    osc.type = \"sine\";\r\n    osc.frequency.value = theme === \"party\" ? 0.7 : 0.3;\r\n    const oscGain = ctx.createGain();\r\n    oscGain.gain.value = 0.02;\r\n    osc.connect(oscGain);\r\n    oscGain.connect(gain);\r\n\r\n    noiseNode.start();\r\n    osc.start();\r\n    // fade in\r\n    gain.gain.linearRampToValueAtTime(0.35, ctx.currentTime + 1.2);\r\n    isStarted = true;\r\n  }\r\n\r\n  function stop() {\r\n    if (!isStarted) return;\r\n    try {\r\n      gain.gain.linearRampToValueAtTime(0.001, ctx.currentTime + 0.8);\r\n      setTimeout(() => {\r\n        noiseNode.stop();\r\n        osc.stop();\r\n        ctx.close();\r\n        ctx = null;\r\n        noiseNode = null;\r\n        osc = null;\r\n        gain = null;\r\n        isStarted = false;\r\n      }, 900);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  }\r\n\r\n  return { start, stop };\r\n}\r\n\r\nexport default function TravelResult({ answers, nicState = {}, onClose = () => { } }) {\r\n  if (!answers) return null;\r\n\r\n  const personaKey = answers.style || Object.keys(personas)[0];\r\n  const base = personas[personaKey] || { name: \"Traveler\", animal: \"🌍\", img: \"/default.jpg\", theme: \"city\" };\r\n\r\n  // UI state\r\n  const [numPeople, setNumPeople] = useState(1);\r\n  const [days, setDays] = useState(3);\r\n  const [companion, setCompanion] = useState(answers.companion || \"🧳 Solo\");\r\n  const [coords, setCoords] = useState(null);\r\n  const [places, setPlaces] = useState([]);\r\n  const [loadingPlaces, setLoadingPlaces] = useState(false);\r\n  const [errorPlaces, setErrorPlaces] = useState(null);\r\n  const [playingAmbient, setPlayingAmbient] = useState(false);\r\n  const ambientRef = useRef(null);\r\n  const cardRef = useRef(null);\r\n\r\n  // cost math\r\n  const perDay = PER_DAY_BASE[personaKey] ?? 120;\r\n  const companionMult = COMPANION_MULTIPLIER[companion] ?? 1.0;\r\n  const groupFactor = groupDiscountFactor(numPeople);\r\n  const ageFactor = ageDiscountFactor(nicState.age);\r\n  const subtotal = perDay * days * numPeople;\r\n  const afterCompanion = subtotal * companionMult;\r\n  const afterGroup = afterCompanion * groupFactor;\r\n  const afterAge = afterGroup * ageFactor;\r\n  const serviceFee = Math.round(afterAge * 0.08);\r\n  const total = Math.round(afterAge + serviceFee);\r\n\r\n  // preload ambient engine (no mp3s)\r\n  useEffect(() => {\r\n    ambientRef.current = createAmbientEngine(base.theme || \"city\");\r\n    return () => {\r\n      try { ambientRef.current && ambientRef.current.stop(); } catch { }\r\n    };\r\n  }, [personaKey]);\r\n\r\n  // toggle ambient sound\r\n  const handleToggleAmbient = () => {\r\n    if (!ambientRef.current) {\r\n      ambientRef.current = createAmbientEngine(base.theme || \"city\");\r\n    }\r\n    if (playingAmbient) {\r\n      ambientRef.current.stop();\r\n      setPlayingAmbient(false);\r\n    } else {\r\n      ambientRef.current.start();\r\n      setPlayingAmbient(true);\r\n    }\r\n  };\r\n\r\n  // find places via Overpass (and set coords using geolocation)\r\n  const handleFindPlacesNearby = () => {\r\n    setErrorPlaces(null);\r\n    setLoadingPlaces(true);\r\n    if (!navigator.geolocation) {\r\n      setErrorPlaces(\"Geolocation not available in this browser.\");\r\n      setLoadingPlaces(false);\r\n      return;\r\n    }\r\n    navigator.geolocation.getCurrentPosition(async (pos) => {\r\n      const lat = pos.coords.latitude;\r\n      const lon = pos.coords.longitude;\r\n      setCoords([lat, lon]);\r\n      try {\r\n        const els = await fetchPlacesOverpass(lat, lon, personaKey, 30000, 20);\r\n        setPlaces(els);\r\n        if (!els.length) setErrorPlaces(\"No nearby POIs found for this category — try Google Maps button below.\");\r\n      } catch (err) {\r\n        console.error(err);\r\n        setErrorPlaces(\"Places lookup failed (Overpass). You can use the Google Maps search button instead.\");\r\n      } finally {\r\n        setLoadingPlaces(false);\r\n      }\r\n    }, (err) => {\r\n      console.warn(\"geo error\", err);\r\n      setErrorPlaces(\"Geolocation denied or timed out. Use Google Maps search instead.\");\r\n      setLoadingPlaces(false);\r\n    }, { timeout: 15000 });\r\n  };\r\n\r\n  /*\r\n  // download PNG with watermark\r\n const handleDownload = async () => {\r\n  if (!cardRef.current) return;\r\n  // create wrapper that preserves gradient + size\r\n  const exportWrapper = document.createElement(\"div\");\r\n  const w = cardRef.current.offsetWidth || 1000;\r\n  exportWrapper.style.width = w + \"px\";\r\n  exportWrapper.style.display = \"inline-block\";\r\n  exportWrapper.style.position = \"relative\";\r\n  exportWrapper.style.padding = \"18px\";\r\n  exportWrapper.style.borderRadius = \"16px\";\r\n  // nice gradient background for export\r\n  exportWrapper.style.background = \"linear-gradient(135deg,#ffecd2,#fcb69f)\";\r\n  exportWrapper.style.boxShadow = \"0 20px 60px rgba(4,20,40,0.25)\";\r\n  exportWrapper.style.fontFamily = getComputedStyle(cardRef.current).fontFamily || \"Poppins, system-ui\";\r\n\r\n  // clone card and append\r\n  const clone = cardRef.current.cloneNode(true);\r\n\r\n  // remove overlay/backdrop elements in the clone that might conflict\r\n  // (if you added dynamic elements like .result-overlay, remove them)\r\n  // keep only the inner content card\r\n  clone.style.margin = \"0\";\r\n  clone.style.boxShadow = \"none\"; // let wrapper provide shadow\r\n  exportWrapper.appendChild(clone);\r\n\r\n  // watermark\r\n  const watermark = document.createElement(\"div\");\r\n  watermark.innerText = \"© hasini de silva\";\r\n  watermark.style.position = \"absolute\";\r\n  watermark.style.right = \"12px\";\r\n  watermark.style.bottom = \"10px\";\r\n  watermark.style.fontSize = \"12px\";\r\n  watermark.style.color = \"rgba(0,0,0,0.55)\";\r\n  watermark.style.fontWeight = \"700\";\r\n  exportWrapper.appendChild(watermark);\r\n\r\n  document.body.appendChild(exportWrapper);\r\n  try {\r\n    const dataUrl = await htmlToImage.toPng(exportWrapper, { cacheBust: true });\r\n    const a = document.createElement(\"a\");\r\n    a.href = dataUrl;\r\n    a.download = `${base.name.replace(/\\s+/g, \"_\")}_travel_card.png`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    a.remove();\r\n  } catch (err) {\r\n    console.error(\"export fail\", err);\r\n    alert(\"Export failed in this browser. Try another browser or update your browser.\");\r\n  } finally {\r\n    exportWrapper.remove();\r\n  }\r\n};  */\r\n\r\n  // NEW ref for Plan & Cost only\r\n  const planRef = useRef(null);\r\n\r\n  const handleDownload = async () => {\r\n    if (!planRef.current) return;\r\n\r\n    // create wrapper for export\r\n    const exportWrapper = document.createElement(\"div\");\r\n    exportWrapper.style.padding = \"20px\";\r\n    exportWrapper.style.borderRadius = \"16px\";\r\n    exportWrapper.style.background = \"linear-gradient(135deg,#f6d365,#fda085)\";\r\n    exportWrapper.style.boxShadow = \"0 12px 32px rgba(0,0,0,0.2)\";\r\n    exportWrapper.style.fontFamily = \"Poppins, system-ui\";\r\n    exportWrapper.style.display = \"inline-block\";\r\n    exportWrapper.style.position = \"relative\";\r\n\r\n    // clone only Plan & Cost area\r\n    const clone = planRef.current.cloneNode(true);\r\n    clone.style.margin = \"0\";\r\n    clone.style.boxShadow = \"none\";\r\n    exportWrapper.appendChild(clone);\r\n\r\n    // watermark\r\n    const watermark = document.createElement(\"div\");\r\n    watermark.innerText = \"© hasini de silva\";\r\n    watermark.style.position = \"absolute\";\r\n    watermark.style.right = \"12px\";\r\n    watermark.style.bottom = \"10px\";\r\n    watermark.style.fontSize = \"12px\";\r\n    watermark.style.color = \"rgba(0,0,0,0.6)\";\r\n    watermark.style.fontWeight = \"600\";\r\n    exportWrapper.appendChild(watermark);\r\n\r\n    document.body.appendChild(exportWrapper);\r\n\r\n    try {\r\n      const dataUrl = await htmlToImage.toPng(exportWrapper, { cacheBust: true });\r\n      const a = document.createElement(\"a\");\r\n      a.href = dataUrl;\r\n      a.download = `${base.name.replace(/\\s+/g, \"_\")}_plan_cost.png`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      a.remove();\r\n    } catch (err) {\r\n      console.error(\"export fail\", err);\r\n      alert(\"Export failed. Try another browser.\");\r\n    } finally {\r\n      exportWrapper.remove();\r\n    }\r\n  };\r\n\r\n\r\n  // open google maps search for category near given coords (if available)\r\n  const openGoogleMapsSearch = (categoryLabel) => {\r\n    const q = encodeURIComponent(categoryLabel);\r\n    if (coords && coords.length === 2) {\r\n      const [lat, lon] = coords;\r\n      // open maps search centered on lat/lon\r\n      const url = `https://www.google.com/maps/search/${q}/@${lat},${lon},13z`;\r\n      window.open(url, \"_blank\");\r\n    } else {\r\n      // use 'near me' search (browser/Google will prompt)\r\n      const url = `https://www.google.com/maps/search/${q}+near+me`;\r\n      window.open(url, \"_blank\");\r\n    }\r\n  };\r\n\r\n  // open google maps for a specific lat/lon (navigate)\r\n  const openInGoogleMaps = (lat, lon, name) => {\r\n    const q = encodeURIComponent(`${name ? name + \" \" : \"\"}${lat},${lon}`);\r\n    const url = `https://www.google.com/maps/search/?api=1&query=${q}`;\r\n    window.open(url, \"_blank\");\r\n  };\r\n\r\n  // produce short category query for Google Maps from persona\r\n  function personaCategoryQuery() {\r\n    switch (personaKey) {\r\n      case \"🌴 Relaxation\": return \"beach\";\r\n      case \"🗺 Adventure\": return \"hiking trail\";\r\n      case \"🏛 Culture\": return \"museum\";\r\n      case \"🎉 Party\": return \"nightclub\";\r\n      case \"🍜 Foodie\": return \"street food\";\r\n      case \"❄ Arctic\": return \"scenic viewpoint\";\r\n      default: return \"tourist attractions\";\r\n    }\r\n  }\r\n\r\n  // creative micro suggestions\r\n  const creativeSuggestions = (() => {\r\n    if (personaKey === \"🎉 Party\") return [\"Sunset rooftop party\", \"Local DJ event\", \"Beach club day-pass\"];\r\n    if (personaKey === \"🗺 Adventure\") return [\"Sunrise trek + viewpoint\", \"Water activity\", \"Village cultural trail\"];\r\n    if (personaKey === \"🌴 Relaxation\") return [\"Sunset yoga\", \"Island boat lunch\", \"Spa afternoon\"];\r\n    if (personaKey === \"🏛 Culture\") return [\"Guided museum tour\", \"Cooking class\", \"Heritage walk\"];\r\n    if (personaKey === \"🍜 Foodie\") return [\"Night market tour\", \"Street-food crawl\", \"Chef table tasting\"];\r\n    if (personaKey === \"❄ Arctic\") return [\"Northern lights chase\", \"Ice-scenic boat trip\", \"Local lodge stay\"];\r\n    return [];\r\n  })();\r\n\r\n  return (\r\n    <div className=\"result-overlay refined\">\r\n      <motion.div className=\"result-card refined\" ref={cardRef}\r\n        initial={{ opacity: 0, scale: 0.96 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        transition={{ duration: 0.28 }}\r\n        role=\"dialog\" aria-modal=\"true\"\r\n      >\r\n        <button className=\"close-btn\" onClick={() => { try { ambientRef.current && ambientRef.current.stop(); } catch { } onClose(); }}>✖</button>\r\n\r\n        <header className=\"card-header\">\r\n          <div className=\"left-head\">\r\n            <div className=\"animal-wrap\">\r\n              <div className=\"animal-emoji\">{base.animal}</div>\r\n            </div>\r\n            <div className=\"title-wrap\">\r\n              <h2 className=\"persona-name\">{base.name}</h2>\r\n              <div className=\"small-meta\">{answers?.setting || \"Curated experience\"} · {answers?.pace || \"\"}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"estimate-chip\">\r\n            <div className=\"estimate-label\">Estimated total</div>\r\n            <div className=\"estimate-amount\">${total}</div>\r\n            <div className=\"per-person\">Per person: ${Math.round(total / numPeople)}</div>\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"card-main\">\r\n          <section className=\"left-col\">\r\n\r\n            <div></div> className=\"export-card\" ref={planRef}>\r\n              <div className=\"persona-header\">\r\n              <span className=\"persona-icon\">{persona.icon}</span>\r\n              <span className=\"persona-name\">{persona.name}</span>\r\n            </div>\r\n\r\n\r\n              <div className=\"panel glass\" ref={planRef}>\r\n                <h3>Plan & Cost</h3>\r\n\r\n                <div className=\"inputs-row\">\r\n                  <label>Travelers\r\n                    <input type=\"number\" min=\"1\" value={numPeople} onChange={(e) => setNumPeople(Math.max(1, Number(e.target.value) || 1))} />\r\n                  </label>\r\n                  <label>Days\r\n                    <input type=\"number\" min=\"1\" value={days} onChange={(e) => setDays(Math.max(1, Number(e.target.value) || 1))} />\r\n                  </label>\r\n                  <label>Companion\r\n                    <select value={companion} onChange={(e) => setCompanion(e.target.value)}>\r\n                      <option>🧳 Solo</option>\r\n                      <option>💑 Partner</option>\r\n                      <option>👯 Friends</option>\r\n                      <option>👨‍👩‍👧 Family</option>\r\n                    </select>\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"cost-break\">\r\n                  <div className=\"row\"><div>Base/day × days × people</div><div>${perDay} × {days} × {numPeople} = <b>${Math.round(perDay * days * numPeople)}</b></div></div>\r\n                  <div className=\"row\"><div>Companion multiplier</div><div>x {companionMult.toFixed(2)}</div></div>\r\n                  <div className=\"row\"><div>Group discount</div><div>x {groupFactor.toFixed(2)}</div></div>\r\n                  <div className=\"row\"><div>Age discount</div><div>x {ageFactor.toFixed(2)}</div></div>\r\n                  <div className=\"row\"><div>Service & taxes (8%)</div><div>${serviceFee}</div></div>\r\n\r\n                  <div className=\"row final\"><div><strong>Total</strong></div><div className=\"big\">${total}</div></div>\r\n                  <div className=\"row small-note\"><div>Per person</div><div>${Math.round(total / numPeople)}</div></div>\r\n                </div>\r\n\r\n                <div className=\"actions-row\">\r\n                  <button className=\"btn primary\" onClick={handleFindPlacesNearby}>\r\n                    {loadingPlaces ? \"Finding…\" : \"Find Places Nearby\"}\r\n                  </button>\r\n\r\n                  <button className=\"btn ghost\" onClick={() => openGoogleMapsSearch(personaCategoryQuery())}>\r\n                    Open in Google Maps\r\n                  </button>\r\n\r\n                  <button className=\"btn alt\" onClick={handleToggleAmbient}>\r\n                    {playingAmbient ? \"🔇 Stop Feel Travel\" : \"🔊 Feel Travel\"}\r\n                  </button>\r\n\r\n                  <button className=\"btn download\" onClick={handleDownload}>\r\n                    Download Card (PNG)\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"panel suggestions\">\r\n                <h4>Creative suggestions</h4>\r\n                <ul>\r\n                  {creativeSuggestions.map((s, i) => (<li key={i}>{s}</li>))}\r\n                </ul>\r\n              </div>\r\n\r\n              <div className=\"panel linkedin\">\r\n                <h4>LinkedIn caption preview</h4>\r\n                <textarea\r\n                  readOnly\r\n                  rows={4}\r\n                  value={`🌍 My travel persona: ${base.name} ${base.animal}\r\n                💰 Estimated trip: $${total} for ${numPeople} people · ${days} days.\r\n                ✨ Style: ${personaCategoryQuery()}\r\n                #TravelQuiz #NICDemo`}\r\n                />\r\n                <button\r\n                  className=\"btn copy\"\r\n                  onClick={() => {\r\n                    navigator.clipboard.writeText(\r\n                      `🌍 My travel persona: ${base.name} ${base.animal}\r\n                     💰 Estimated trip: $${total} for ${numPeople} people · ${days} days.\r\n                     ✨ Style: ${personaCategoryQuery()}\r\n                     #TravelQuiz #NICDemo`\r\n                    ).then(() => alert(\"Copied to clipboard ✅\"));\r\n                  }}\r\n                >\r\n                  📋 Copy\r\n                </button>\r\n              </div>\r\n\r\n          </section>\r\n\r\n          <aside className=\"right-col\">\r\n            <div className=\"map-embed glass\">\r\n              {coords ? (\r\n                <MapExplorer center={coords} places={places} />\r\n              ) : (\r\n                <>\r\n                  <div className=\"map-placeholder\">\r\n                    <div className=\"map-msg\">No location yet</div>\r\n                    <div className=\"map-sub\">Click Find Places Nearby to allow location and discover local {personaCategoryQuery()} spots.</div>\r\n                    <div className=\"map-quick\">\r\n                      <button className=\"btn primary\" onClick={handleFindPlacesNearby}>Allow location & find</button>\r\n                      <button className=\"btn ghost\" onClick={() => openGoogleMapsSearch(personaCategoryQuery())}>Open maps search</button>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n              {errorPlaces && <div className=\"error-banner\">{errorPlaces}</div>}\r\n            </div>\r\n\r\n            <div className=\"places-list glass\">\r\n              <h4>Suggested places</h4>\r\n              {(places.length ? places : fallbackSuggestions(personaKey)).slice(0, 8).map((p, i) => {\r\n                const name = p.tags?.name || p.display_name || p.name || fallbackSuggestions(personaKey)[i]?.name || `Place ${i + 1}`;\r\n                const lat = p.lat ?? p.center?.lat ?? fallbackSuggestions(personaKey)[i]?.lat;\r\n                const lon = p.lon ?? p.center?.lon ?? fallbackSuggestions(personaKey)[i]?.lon;\r\n                return (\r\n                  <div key={i} className=\"place-row\">\r\n                    <div className=\"place-info\">\r\n                      <div className=\"place-name\">{name}</div>\r\n                      <div className=\"place-meta\">{p.tags?.amenity || p.type || \"\"}</div>\r\n                    </div>\r\n                    <div className=\"place-ctas\">\r\n                      {lat && lon ? (\r\n                        <button className=\"btn small\" onClick={() => openInGoogleMaps(lat, lon, name)}>Navigate</button>\r\n                      ) : (\r\n                        <a className=\"open-google\" target=\"_blank\" rel=\"noreferrer\" href={p.url ?? \"#\"}>Open</a>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </aside>\r\n        </main>\r\n\r\n        <footer className=\"card-footer\">© hasini de silva</footer>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// fallback suggestions helper\r\nfunction fallbackSuggestions(key) {\r\n  switch (key) {\r\n    case \"🌴 Relaxation\": return [{ name: \"Maldives — Atoll beaches\", lat: 3.2028, lon: 73.2207 }];\r\n    case \"🗺 Adventure\": return [{ name: \"Chiang Mai treks\", lat: 18.7883, lon: 98.9853 }];\r\n    case \"🏛 Culture\": return [{ name: \"Florence, Italy — art & history\", lat: 43.7696, lon: 11.2558 }];\r\n    case \"🎉 Party\": return [{ name: \"Ibiza, Spain — nightlife\", lat: 38.9067, lon: 1.4206 }];\r\n    case \"🍜 Foodie\": return [{ name: \"Bangkok street food\", lat: 13.7563, lon: 100.5018 }];\r\n    case \"❄ Arctic\": return [{ name: \"Tromsø, Norway — northern lights\", lat: 69.6492, lon: 18.9553 }];\r\n    default: return [];\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}